<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>学生管理系统</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="./dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./dist/css/1.css" rel="stylesheet">

    <script src="./dist/js/1.js"></script>
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script type="text/javascript" src="./dist/js/jquery/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="./dist/js/bootstrap/bootstrap.min.js"></script>
</head>

<body>
<div class="topnav">
    <ul>
        <a class="active" href="#home"><span class="glyphicon glyphicon-home"></span> 主页</a>
        <a href="index.html" target="_self">学生</a>
        <a href="ajax.html">老师</a>
        <a href="#about" style="float:right">关于 <span class="glyphicon glyphicon-info-sign"></span></a>
    </ul>
</div>
<div class="row">
    <div class="panel-group col-sm-2" id="panelContainer">
        <div class="panel panel-default">
            <div id="header1" class="panel-heading" data-toggle="collapse" data-target="#sub1" data-parent="#panelContainer">
                <i class="glyphicon glyphicon-user"></i>
                <a href="#">学生管理</a>
                <span class="glyphicon glyphicon-triangle-right pull-right"></span>
            </div>
            <div id="sub1" class="collapse panel-collapse">
                <div class="panel-body">
                    <ul class="nav">
                        <li>
                            <a href="#">
                        <span class="glyphicon glyphicon-align-left" aria-hidden="true">
                        </span>学生信息录入</a>
                        </li>
                        <li>
                            <a href="newstudent.html">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true">
                        </span>学生信息新增</a>
                        </li>
                        <li>
                            <a href="#">
                        <span class="glyphicon glyphicon-minus" aria-hidden="true">
                        </span>学生信息删除</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div id="header2" class="panel-heading" data-toggle="collapse" data-target="#sub2" data-parent="#panelContainer">
                <i class="glyphicon glyphicon-list-alt"></i>
                <a href="#">班级管理</a>
                <span class="glyphicon glyphicon-triangle-right pull-right"></span>
            </div>
            <div id="sub2" class="collapse panel-collapse">
                <div class="panel-body">
                    <ul class="nav">
                        <li>
                            <a href="#">
                        <span class="glyphicon glyphicon-align-left" aria-hidden="true">
                        </span>班级信息录入</a>
                        </li>
                        <li>
                            <a href="newstudent.html">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true">
                        </span>班级信息新增</a>
                        </li>
                        <li>
                            <a href="#">
                        <span class="glyphicon glyphicon-minus" aria-hidden="true">
                        </span>班级信息删除</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div id="header3" class="panel-heading" data-toggle="collapse" data-target="#sub3" data-parent="#panelContainer">
                <i class="glyphicon glyphicon-leaf"></i>
                <a href="#">专业管理</a>
                <span class="glyphicon glyphicon-triangle-right pull-right"></span>
            </div>
            <div id="sub3" class="collapse panel-collapse">
                <div class="panel-body">
                    <ul class="nav">
                        <li>
                            <a href="#">
                        <span class="glyphicon glyphicon-align-left" aria-hidden="true">
                        </span>专业信息录入</a>
                        </li>
                        <li>
                            <a href="newstudent.html">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true">
                        </span>专业信息新增</a>
                        </li>
                        <li>
                            <a href="#">
                        <span class="glyphicon glyphicon-minus" aria-hidden="true">
                        </span>专业信息删除</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-10">
        <ol class="breadcrumb">
            <li class="active">菜单
            </li>
            <li class="active">学生列表
            </li>
        </ol>

        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-search"></span>  搜索
            </div>
            <div class="panel-body">
                <form role="search" class="navbar-form" id="search">
                    <div class="form-group">
                        <input type="text"  placeholder="Search" class="form-control" name="search">
                    </div>
                    <button class="btn btn-default" type="submit">Search</button>
                </form>
            </div>
        </div>
        <!--列表展示-->
        <div class="table-responsive">
<!--            <div class="panel-heading">Search Results</div>-->
            <table id="results" class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>姓名</th>
                    <th>学号</th>
                    <th>性别</th>
                    <th>出生日期</th>
                    <th>专业</th>
                    <th>编程语言</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <ul class="pagination" style="float: right;">
            <li><a href="#">&laquo;</a>
            </li>
            <li class="active"><a href="#">1</a>
            </li>
            <li class="disabled"><a href="#">2</a>
            </li>
            <li><a href="#">3</a>
            </li>
            <li><a href="#">4</a>
            </li>
            <li><a href="#">5</a>
            </li>
            <li><a href="#">&raquo;</a>
            </li>
        </ul>
    </div>
<!--    <div class="col-md-5">-->
<!--        <div class="panel panel-default">-->
<!--            <div class="panel-heading" id="name">Details</div>-->
<!--            <div class="row">-->
<!--                <div class="col-sm-4 col-md-4">-->
<!--                    <img src="" class="well" id="poster"/>-->
<!--                </div>-->
<!--                <div class="col-md-8 col-sm-8">-->
<!--                    <h4>Crew</h4>-->
<!--                    <ul id="crew">-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
</div>

<!--<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>-->
<!--<script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>-->
<script type="text/javascript">
    $(function () {
        function showStudent(name) {
            $.get("/students/search/findByName?name=" + encodeURIComponent(name), //固定参数 todo fix paramter in SDN
                function (data) {
                    if (!data) return;
                    var student = data;
                    $("#name").text(student.name);
                    $("#poster").attr("src","http://neo4j-contrib.github.io/developer-resources/language-guides/assets/posters/"+encodeURIComponent(student.name)+".jpg");
                    var $list = $("#crew").empty();
                    student.roles.forEach(function (cast) {
                        $.get(cast._links.person.href, function(personData) {
                            var person = personData.name;
                            var job = cast.job || "acted";
                            $list.append($("<li>" + person + " " +job + (job == "acted"?" as " + cast.roles.join(", ") : "") + "</li>"));
                        });
                    });
                }, "json");
            return false;
        }
        //删除学生
        function deletestu(i){
            // $.get("/students/search/deleteByName?name=" + encodeURIComponent(name), //固定参数 todo fix paramter in SDN
            //     function (data) {
            //         if (!data) return;
            //         var student = data;
            //         $("#name").text(student.name);
            //     }, "json");
            // return false;
        }

        function search() {
            var query=$("#search").find("input[name=search]").val();
            $.get("/students/search/findByNameLike?name=*" + encodeURIComponent(query) + "*",
                function (data) {
                    var t = $("table#results tbody").empty();
                    if (!data) return;
                    data = data["_embedded"].students;
                    data.forEach(function (student) {
                        $("<tr><td class='student'>" + student.name + "</td><td>" + student.student_id + "</td><td>" + student.gender + "</td></tr>"
                        + student.birth + "</td></tr>").appendTo(t)
                            .click(function() { showStudent($(this).find("td.student").text());})
                    });
                    showStudent(data[0].name);
                }, "json");
            return false;
        }

        $("#search").submit(search);
        search();
    })
</script>

<script type="text/javascript">
    var width = 800, height = 800;

    var force = d3.layout.force()
        .charge(-200).linkDistance(30).size([width, height]);

    var svg = d3.select("#graph").append("svg")
        .attr("width", "100%").attr("height", "100%")
        .attr("pointer-events", "all");

    d3.json("/graph", function(error, graph) {
        if (error) return;

        force.nodes(graph.nodes).links(graph.links).start();

        var link = svg.selectAll(".link")
            .data(graph.links).enter()
            .append("line").attr("class", "link");

        var node = svg.selectAll(".node")
            .data(graph.nodes).enter()
            .append("circle")
            .attr("class", function (d) { return "node "+d.label })
            .attr("r", 10)
            .call(force.drag);

        // html name attribute
        node.append("name")
            .text(function (d) { return d.name; })

        // force feed algo ticks
        force.on("tick", function() {
            link.attr("x1", function(d) { return d.source.x; })
                .attr("y1", function(d) { return d.source.y; })
                .attr("x2", function(d) { return d.target.x; })
                .attr("y2", function(d) { return d.target.y; });

            node.attr("cx", function(d) { return d.x; })
                .attr("cy", function(d) { return d.y; });
        });
    });
</script>
<!-- 底部页脚部分 -->
<div class="footer">
    <p class="text-center">
        2020 &copy; Odin.
    </p>
</div>
</body>
</html>
